<script type="text/ng-template" id="folder-management">
	<a ng-class="{ selected: isTargetFolder(folder)}" ng-click="addTargetFolder(folder)">
		[[folder.name]]
	</a>
	<ul class="row">
		<li ng-repeat="folder in folder.children" ng-include="'folder-management'"></li>
	</ul>
</script>

<container template="copy-files"></container>
<container template="send-rack"></container>

<div class="row" ng-controller="LibraryController">
	<div class="row rigid-grid">
		<h1 class="four cell" data-reload>
			<a><i class="rack"></i><i18n>rack.title</i18n></a>
		</h1>
		<nav class="contextual-buttons margin-four">
			<div class="twelve cell">
				<div class="action-buttons">
					<button ng-click="openNewRack()" workflow="rack.send">
						<i18n>rack.sendRack</i18n>
					</button>
				</div>
				<div class="display-buttons" ng-if="template.contains('list', 'table-list') || template.contains('list', 'icons-list')">
					<i class="show-list"
					ng-class="{ selected: template.contains('list', 'table-list') }"
					ng-click="template.open('list', 'table-list')"></i>
					<i class="show-icons"
					ng-class="{ selected: template.contains('list', 'icons-list') }"
					ng-click="template.open('list', 'icons-list')"></i>
				</div>
			</div>
			
		</nav>
	</div>

	<div class="row rigid-grid">
		<section class="vertical four cell">
			<nav class="vertical">
				<ul>
					<li ng-repeat="f in folders">
						<a ng-if="!f.workflow"
						   ng-click="refreshListing(f)"
						   translate content="rack.[[f.name]]"
						   ng-class="{ selected: f.name === folder.name }">
                        </a>
						<a ng-if="f.workflow"
						   workflow="[[f.workflow]]"
						   ng-click="refreshListing(f)"
						   translate content="rack.[[f.name]]"
						   ng-class="{ selected: f.name === folder.name }">
                        </a>
					</li>
				</ul>
			</nav>
			<div class="nine row">
				<hr class="row" />
				<h2><i18n>rack.usedSpace</i18n></h2>
				<progress-bar max="quota.max" filled="quota.used" unit="[[quota.unit]]"></progress-bar>
			</div>
		</section>
		<section class="margin-four">
			<div class="twelve cell">
				<container template="list"></container>
			</div>
		</section>
	</div>

	<section class="toggle-buttons" ng-class="{ hide: !folder.bottomBarButtons || rackList.selection().length === 0 }">
		<div class="toggle">
			<div class="row">
				<div class="cell" ng-repeat="button in folder.bottomBarButtons">
					<button  translate content="[[button.name]]" ng-if="button.showCondition()" ng-click="button.onClick()"/>
				</div>
            </div>
		</div>
	</section>

</div>
